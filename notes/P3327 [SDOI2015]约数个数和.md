
$$
\sum_{i=1}^n\sum_{j=1}^m d(ij)
$$
不妨假设 $n\le m$, 否则可以交换 $n, m$
$$
\sum_{i=1}^n\sum_{j=1}^m \sum_{x|i} \sum_{y|j}[\gcd(x,y)=1]
$$
改变求和的顺序
$$
\sum_{x=1}^n
\sum_{y=1}^m
[\gcd(x,y)=1]
\sum_{i=1}^n
\sum_{j=1}^m
[x|i\land y|j]
\\
\sum_{x=1}^n
\sum_{y=1}^m
[\gcd(x,y)=1]
\sum_{i=1}^n	[x|i]
\sum_{j=1}^m	[y|j]
$$
由于一共只有 $\lfloor \dfrac{n}{x} \rfloor$ 个 $i$ 是 $x$ 的倍数, 对 $j$ 类似(待讨论)
$$
\sum_{x=1}^n
\sum_{y=1}^m
[\gcd(x,y)=1]
\lfloor \dfrac{n}{x} \rfloor
\lfloor \dfrac{m}{y} \rfloor
$$
有一个反演结论(待讨论):
$$
[\gcd(x,y)=1]=
\sum_{d|\gcd(x,y)}\mu(d)
$$
实际上这就是
$$
\epsilon(\gcd(x,y))=(\mu * u)(\gcd(x,y))
$$
由于 $\mu$ 是 $u$ 在卷积意义下的逆元, 该式显然成立, 所以原式写成
$$
\sum_{x=1}^n
\sum_{y=1}^m
\sum_{d|\gcd(x,y)}\mu(d)
\lfloor \dfrac{n}{x} \rfloor
\lfloor \dfrac{m}{y} \rfloor
$$
改为枚举 $d$
$$
\sum_{d=1}^n
\mu(d)
\sum_{x=1}^n
\sum_{y=1}^m
\lfloor \dfrac{n}{x} \rfloor
\lfloor \dfrac{m}{y} \rfloor
[d|x\land d|y]
$$
跟上面类似的考虑, 显然只有 $\lfloor \dfrac{n}{d} \rfloor$ 种 $x$ 是合法的考虑, 所以一次让 $x$ 跳 $d$ 步, 总共只需要跳 $\lfloor \dfrac{n}{d} \rfloor$ 步, $y$ 同样类似(待讨论)

式子变成
$$
\sum_{d=1}^n
\mu(d)
\sum_{x'=1}^{\lfloor \dfrac{n}{d} \rfloor}
\sum_{y'=1}^{\lfloor \dfrac{m}{d} \rfloor}
\lfloor \dfrac{n}{x'd} \rfloor
\lfloor \dfrac{m}{y'd} \rfloor
$$
注意现在这里的 $x',y'$ 的意义是跳的步数, $x'd$ 和 $y'd$ 是原来的 $x,y$

根据乘法分配律有(待讨论):
$$
\sum_{d=1}^n
\mu(d)
(\sum_{x'=1}^{\lfloor \dfrac{n}{d} \rfloor}
\lfloor \dfrac{n}{x'd} \rfloor)
(\sum_{y'=1}^{\lfloor \dfrac{m}{d} \rfloor}
\lfloor \dfrac{m}{y'd} \rfloor
$$
后面的内容可以正常数论分块, 设
$$
f(x)=
\sum_{i=1}^x
\lfloor
\frac{x}{i}
\rfloor
$$
原式有
$$
\sum_{d=1}^n
\mu(d)
(
f{\lfloor \dfrac{n}{d} \rfloor}
)
(
f{\lfloor \dfrac{m}{d} \rfloor}
)
$$
预处理 $\mu$ 前缀和即可